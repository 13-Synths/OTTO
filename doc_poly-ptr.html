<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>poly-ptr.hpp</title>
<style type="text/css" media="screen">

@import url(https://fonts.googleapis.com/css?family=Roboto:400,400i,700,700i);
@import url(https://fonts.googleapis.com/css?family=Inconsolata:400,700);

@font-face {
    font-family: TOP-1;
    src:url(styles/OTTO-Light.ttf)
    format("truetype")
}

code.standardese-language-cpp {
    margin: 0px;
    display: block;
    background: #FAFAFA;
    padding: 20px;
    overflow: auto;
    border: 1px solid #EEE;
}

code.standardese-language-cpp.standardese-entity-synopsis {
    border-left: 4px solid #e63700;
}

hr.standardese-entity-documentation-break {
    border: none;
}

h1, h2, h3, h4, h5, h6 {
    font-family: TOP-1;
    color: #e63700
}

* {
    font-family: Roboto Regular
}

code * {
    font-family: Inconsolata;
}

code {
    font-family: Inconsolata;
    background: #F5F5F5;
    padding: 0.1em 0.4em;
    border-radius: 0.2em
}

body {
  min-height: 100vh;
}

body, .container {
  display: flex;
  flex-direction: column;
}

.sidebar.left {
  /* put the nav on the left */
  order: -1;
}

.page-contents {
  overflow-x: auto;
}

.page-contents {
    overflow-x: auto;
    max-width: 900px;
    padding: 0px 20px;
}

@media (min-width: 768px) {
  .container {
    flex-direction: row;
    flex: 1;
  }
  .page-contents {
    flex: 1;
  }
  .sidebar {
    /* 12em is the width of the columns */
    flex: 0 0 18em;
  }
}

h3.standardese-entity-documentation-heading {
    font-size: 21px;
}

dt {
    font-family: TOP-1;
    color: #e63700;
}

a {
    color: #e63700;
    text-decoration:  none;
}

ul {
    list-style-type: circle;
}

li#standardese-poly-ptr\.hpp a {
    color: black;
}

</style>
</head>
<body>
  <div class="container">
    <div class="page-contents">
      <article id="standardese-poly-ptr.hpp" class="standardese-file-documentation">
<h1 class="standardese-file-documentation-heading">Header file <code>poly-ptr.hpp</code></h1>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="pre">#include</span> <span class="pre">&lt;</span><span class="typ dec var fun">memory</span><span class="pre">&gt;</span>

<span class="pre">#include</span> <span class="pre">&lt;</span><span class="typ dec var fun">type_traits</span><span class="pre">&gt;</span>

<span class="kwd">namespace</span> <span class="typ dec var fun">otto</span>
<span class="pun">{</span>
    <span class="kwd">namespace</span> <span class="typ dec var fun">util</span>
    <span class="pun">{</span>
        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">Storage</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">Base</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Types</span><span class="pun">&gt;</span>
        <span class="kwd">class</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E"><span class="typ dec var fun">basic_poly_ptr</span></a><span class="pun">;</span>

        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">Base</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
        <span class="kwd">using</span> <span class="typ dec var fun">poly_ptr</span> <span class="pun">=</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E"><span class="typ dec var fun">basic_poly_ptr</span></a><span class="pun">&lt;</span>Base *, Base, Ts...<span class="pun">&gt;</span><span class="pun">;</span>

        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">Base</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
        <span class="kwd">using</span> <span class="typ dec var fun">unique_poly_ptr</span> <span class="pun">=</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E"><span class="typ dec var fun">basic_poly_ptr</span></a><span class="pun">&lt;</span>detail::unique_poly_storage&lt;Base&gt;, Base, Ts...<span class="pun">&gt;</span><span class="pun">;</span>

        <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

        <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::storage_type"><span class="typ dec var fun">otto::util::basic_poly_ptr::storage_type</span></a> <span class="kwd">const</span><span class="pun">&amp;</span> <span class="typ dec var fun">ptr</span><span class="pun">)</span><span class="pun">;</span>

        <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::storage_type"><span class="typ dec var fun">otto::util::basic_poly_ptr::storage_type</span></a><span class="pun">&amp;&amp;</span> <span class="typ dec var fun">ptr</span><span class="pun">)</span><span class="pun">;</span>

        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">E</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">S</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">B</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
        <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span><span class="typ dec var fun">T</span><span class="pun">*</span> <span class="typ dec var fun">t</span><span class="pun">)</span><span class="pun">;</span>

        <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span>const basic_poly_ptr&lt;Storage, Base, Types...&gt;<span class="pun">&amp;</span> <span class="typ dec var fun">o</span><span class="pun">)</span><span class="pun">;</span>

        <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span>basic_poly_ptr&lt;Storage, Base, Types...&gt;<span class="pun">&amp;&amp;</span> <span class="typ dec var fun">o</span><span class="pun">)</span><span class="pun">;</span>

        <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E"><span class="typ dec var fun">basic_poly_ptr</span></a><span class="pun">&lt;</span>S, B, Ts...<span class="pun">&gt;</span><span class="pun">&amp;</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">operator=</span><span class="pun">(</span>basic_poly_ptr&lt;Storage, Base, Types...&gt; <span class="typ dec var fun">o</span><span class="pun">)</span><span class="pun">;</span>

        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">S</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">B</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
        <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, bool<span class="pun">&gt;</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">is</span><span class="pun">(</span><span class="pun">)</span> <span class="kwd">const</span><span class="pun">;</span>

        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="typ dec var fun">detail::TypeIndex</span> <span class="typ dec var fun">I</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">S</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">B</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
        <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;get_type_t&lt;I&gt; &gt;, bool<span class="pun">&gt;</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">is</span><span class="pun">(</span><span class="pun">)</span> <span class="kwd">const</span><span class="pun">;</span>

        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">S</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">B</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
        <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, T &amp;<span class="pun">&gt;</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">get</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="typ dec var fun">detail::TypeIndex</span> <span class="typ dec var fun">I</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">S</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">B</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
        <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;get_type_t&lt;I&gt; &gt;, get_type_t&lt;I&gt; &amp;<span class="pun">&gt;</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">get</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">S</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">B</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
        <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, basic_poly_ptr&lt;Storage, Base, Types...&gt; &amp;<span class="pun">&gt;</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">operator=</span><span class="pun">(</span><span class="typ dec var fun">T</span><span class="pun">*</span> <span class="typ dec var fun">t</span><span class="pun">)</span><span class="pun">;</span>

        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">S</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">B</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
        <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, basic_poly_ptr&lt;Storage, Base, Types...&gt; &amp;<span class="pun">&gt;</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">operator=</span><span class="pun">(</span><span class="typ dec var fun">T</span><span class="pun">&amp;</span> <span class="typ dec var fun">t</span><span class="pun">)</span><span class="pun">;</span>

        <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">&amp;</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">base</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

        <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">&amp;</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">operator*</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

        <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">*</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">operator-&gt;</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

        <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="kwd">operator</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">*</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

        <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Funcs</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">S</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">B</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
        <span class="typ dec var fun">std::common_type_t</span><span class="pun">&lt;</span>util::invoke_result_t&lt;overloaded&lt;Funcs...&gt;, base_type &amp;&gt;, util::invoke_result_t&lt;overloaded&lt;Funcs...&gt;, Ts &amp;&gt;...<span class="pun">&gt;</span> <span class="typ dec var fun">basic_poly_ptr&lt;Storage, Base, Types&gt;::</span><span class="typ dec var fun">match</span><span class="pun">(</span>Funcs &amp;&amp;... <span class="typ dec var fun">f</span><span class="pun">)</span><span class="pun">;</span>
    <span class="pun">}</span>
<span class="pun">}</span>
</code></pre>
<section id="standardese-otto" class="standardese-entity-documentation">
<section id="standardese-otto::util" class="standardese-entity-documentation">
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Class <code>otto::util::basic_poly_ptr</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">Storage</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">Base</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Types</span><span class="pun">&gt;</span>
<span class="kwd">class</span> <span class="typ dec var fun">basic_poly_ptr</span>
<span class="pun">{</span>
    <span class="kwd">static_assert</span><span class="pun">(</span><span class="kwd">std</span><span class="pun">::</span><span class="kwd">conjunction_v</span><span class="pun">&lt;</span><span class="kwd">std</span><span class="pun">::</span><span class="kwd">is_base_of</span><span class="pun">&lt;</span><span class="kwd">Base</span><span class="pun">,</span> <span class="kwd">Types</span><span class="pun">&gt;</span><span class="pun">...</span><span class="pun">&gt;</span><span class="pun">,</span> <span class="str">&quot;Base must be a base of all Types...&quot;</span><span class="pun">);</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">Visitor</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">Ret</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
    <span class="kwd">struct</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::visitor_dispatch%3CVisitor,Ret,Ts%3E"><span class="typ dec var fun">visitor_dispatch</span></a><span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">Visitor</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">Ret</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">T1</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
    <span class="kwd">struct</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::visitor_dispatch%3CVisitor,Ret,Ts%3E"><span class="typ dec var fun">visitor_dispatch</span></a><span class="pun">&lt;</span><span class="kwd">Visitor</span><span class="pun">,</span> <span class="kwd">Ret</span><span class="pun">,</span> <span class="kwd">T1</span><span class="pun">,</span> <span class="kwd">Ts</span><span class="pun">...</span><span class="pun">&gt;</span><span class="pun">;</span>

<span class="kwd">public</span><span class="pun">:</span>
    <span class="kwd">static</span> <span class="kwd">constexpr</span> <span class="typ dec var fun">detail::TypeIndex</span> <span class="kwd">const</span> <span class="typ dec var fun">invalid_index</span> <span class="pun">=</span> <span class="kwd">detail</span><span class="pun">::</span><span class="kwd">invalid_index</span><span class="pun">;</span>

    <span class="kwd">static</span> <span class="kwd">constexpr</span> <span class="typ dec var fun">detail::TypeIndex</span> <span class="kwd">const</span> <span class="typ dec var fun">base_index</span> <span class="pun">=</span> <span class="kwd">detail</span><span class="pun">::</span><span class="kwd">base_index</span><span class="pun">;</span>

    <span class="typ dec var fun">template</span> <span class="pun">&lt;</span><span class="typ dec var fun">typename</span> <span class="kwd">T</span><span class="pun">&gt;</span><span class="typ dec var fun">static</span> <span class="typ dec var fun">constexpr</span> <span class="kwd">detail</span><span class="pun">::</span><span class="kwd">TypeIndex</span> <span class="kwd">get_index_v</span> <span class="pun">=</span> <span class="kwd">detail</span><span class="pun">::</span><span class="kwd">type_index</span><span class="pun">&lt;</span><span class="kwd">Base</span><span class="pun">,</span> <span class="kwd">T</span><span class="pun">,</span> <span class="kwd">Types</span><span class="pun">...</span><span class="pun">&gt;</span><span class="pun">::</span><span class="kwd">value</span><span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><span class="typ dec var fun">detail::TypeIndex</span> <span class="typ dec var fun">I</span><span class="pun">&gt;</span>
    <span class="kwd">using</span> <span class="typ dec var fun">get_type_t</span> <span class="pun">=</span> typename detail::type_for_index&lt;Base, I, Types...&gt;::type<span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">&gt;</span>
    <span class="kwd">using</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::is_valid_type%3CT%3E"><span class="typ dec var fun">is_valid_type</span></a> <span class="pun">=</span> <span class="typ dec var fun">std::integral_constant</span><span class="pun">&lt;</span>bool, get_index_v&lt;T&gt; != invalid_index<span class="pun">&gt;</span><span class="pun">;</span>

    <span class="typ dec var fun">template</span> <span class="pun">&lt;</span><span class="typ dec var fun">typename</span> <span class="kwd">T</span><span class="pun">&gt;</span><span class="typ dec var fun">static</span> <span class="typ dec var fun">constexpr</span> <span class="typ dec var fun">bool</span> <span class="kwd">is_valid_type_v</span> <span class="pun">=</span> <span class="kwd">is_valid_type</span><span class="pun">&lt;</span><span class="kwd">T</span><span class="pun">&gt;</span><span class="pun">::</span><span class="kwd">value</span><span class="pun">;</span>

    <span class="kwd">using</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::index_type"><span class="typ dec var fun">index_type</span></a> <span class="pun">=</span> <span class="typ dec var fun">detail::TypeIndex</span><span class="pun">;</span>

    <span class="kwd">using</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::storage_type"><span class="typ dec var fun">storage_type</span></a> <span class="pun">=</span> <span class="typ dec var fun">Storage</span><span class="pun">;</span>

    <span class="kwd">using</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a> <span class="pun">=</span> <span class="typ dec var fun">Base</span><span class="pun">;</span>

    <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::basic_poly_ptr()"><span class="typ dec var fun">basic_poly_ptr</span></a><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

    <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::basic_poly_ptr(otto::util::basic_poly_ptr::storage_typeconst&amp;)"><span class="typ dec var fun">basic_poly_ptr</span></a><span class="pun">(</span><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::storage_type"><span class="typ dec var fun">otto::util::basic_poly_ptr::storage_type</span></a> <span class="kwd">const</span><span class="pun">&amp;</span><span class="pun">)</span><span class="pun">;</span>

    <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::basic_poly_ptr(otto::util::basic_poly_ptr::storage_type&amp;&amp;)"><span class="typ dec var fun">basic_poly_ptr</span></a><span class="pun">(</span><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::storage_type"><span class="typ dec var fun">otto::util::basic_poly_ptr::storage_type</span></a><span class="pun">&amp;&amp;</span><span class="pun">)</span><span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">=</span> is_valid_type&lt;T&gt;<span class="pun">&gt;</span>
    <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::basic_poly_ptr%3CT,%3E(T*)"><span class="typ dec var fun">basic_poly_ptr</span></a><span class="pun">(</span><span class="typ dec var fun">T</span><span class="pun">*</span> <span class="typ dec var fun">t</span><span class="pun">)</span><span class="pun">;</span>

    <span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span>const basic_poly_ptr&lt;Storage, Base, Types...&gt;<span class="pun">&amp;</span><span class="pun">)</span><span class="pun">;</span>

    <span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span>basic_poly_ptr&lt;Storage, Base, Types...&gt;<span class="pun">&amp;&amp;</span><span class="pun">)</span><span class="pun">;</span>

    basic_poly_ptr&lt;Storage, Base, Types...&gt;<span class="pun">&amp;</span> <span class="typ dec var fun">operator=</span><span class="pun">(</span>basic_poly_ptr&lt;Storage, Base, Types...&gt;<span class="pun">)</span><span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">&gt;</span>
    <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, bool<span class="pun">&gt;</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::is%3CT%3E()const"><span class="typ dec var fun">is</span></a><span class="pun">(</span><span class="pun">)</span> <span class="kwd">const</span><span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::index_type"><span class="typ dec var fun">otto::util::basic_poly_ptr::index_type</span></a> <span class="typ dec var fun">I</span><span class="pun">&gt;</span>
    <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;get_type_t&lt;I&gt; &gt;, bool<span class="pun">&gt;</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::is%3CI%3E()const"><span class="typ dec var fun">is</span></a><span class="pun">(</span><span class="pun">)</span> <span class="kwd">const</span><span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">&gt;</span>
    <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, T &amp;<span class="pun">&gt;</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::get%3CT%3E()"><span class="typ dec var fun">get</span></a><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::index_type"><span class="typ dec var fun">otto::util::basic_poly_ptr::index_type</span></a> <span class="typ dec var fun">I</span><span class="pun">&gt;</span>
    <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;get_type_t&lt;I&gt; &gt;, get_type_t&lt;I&gt; &amp;<span class="pun">&gt;</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::get%3CI%3E()"><span class="typ dec var fun">get</span></a><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">&gt;</span>
    <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, basic_poly_ptr&lt;Storage, Base, Types...&gt; &amp;<span class="pun">&gt;</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::operator=%3CT%3E(T*)"><span class="typ dec var fun">operator=</span></a><span class="pun">(</span><span class="typ dec var fun">T</span><span class="pun">*</span> <span class="typ dec var fun">t</span><span class="pun">)</span><span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">&gt;</span>
    <span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, basic_poly_ptr&lt;Storage, Base, Types...&gt; &amp;<span class="pun">&gt;</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::operator=%3CT%3E(T&amp;)"><span class="typ dec var fun">operator=</span></a><span class="pun">(</span><span class="typ dec var fun">T</span><span class="pun">&amp;</span> <span class="typ dec var fun">t</span><span class="pun">)</span><span class="pun">;</span>

    <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">&amp;</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base()"><span class="typ dec var fun">base</span></a><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

    <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">&amp;</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::operator*()"><span class="typ dec var fun">operator*</span></a><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

    <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">*</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::operator-%3E()"><span class="typ dec var fun">operator-&gt;</span></a><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

    <span class="kwd">operator</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">*</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>

    <span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Funcs</span><span class="pun">&gt;</span>
    <span class="typ dec var fun">std::common_type_t</span><span class="pun">&lt;</span>util::invoke_result_t&lt;overloaded&lt;Funcs...&gt;, base_type &amp;&gt;, util::invoke_result_t&lt;overloaded&lt;Funcs...&gt;, Types &amp;&gt;...<span class="pun">&gt;</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::match%3CFuncs%3E(Funcs&amp;&amp;...)"><span class="typ dec var fun">match</span></a><span class="pun">(</span>Funcs &amp;&amp;... <span class="typ dec var fun">f</span><span class="pun">)</span><span class="pun">;</span>

<span class="kwd">protected</span><span class="pun">:</span>
    <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::index_type"><span class="typ dec var fun">index_type</span></a> <span class="typ dec var fun">index</span><span class="pun">;</span>

    <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::storage_type"><span class="typ dec var fun">storage_type</span></a> <span class="typ dec var fun">store</span><span class="pun">;</span>
<span class="pun">};</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;-brief" class="standardese-brief-section">A pointer type to help with polymorphism</p>
<p>A <code>poly_ptr</code> is instantiatetd with a base type, and a list of types
that inherit from the base. It is then implicitly convertable to the
base class, and explicitly convertible to the child type that currently
stored. In this sense, it behaves a bit like a <code>std::variant</code>, with the
added difference of not providing storage for the enclosed type.</p>
<p>Two partial specializations, <a href="otto::poly_ptr">otto::poly_ptr</a> and <a href="otto::unique_poly_ptr">otto::unique_poly_ptr</a>
are provided. <a href="otto::poly_ptr">otto::poly_ptr</a> uses raw pointers for storage, and as such
ownership should be managed elsewhere. <a href="otto::unique_poly_ptr">otto::unique_poly_ptr</a> uses
<code>std::unique_ptr</code>, and therefore owns its elements.</p>
<p>This is especially useful for storing a predefined set of types,
that all inherit from the same base class, in a container.
In the OTTO it’s used for midi events, to be able to store the
events in a vector, and only access the subtypes when necessary.</p>
<p>You should use either <code>otto::poly_ptr</code> or <code>otto::unique_poly_ptr</code>
in nearly all cases.</p>
<p>@Storage The underlying pointer to use for storage.
Must be pointer-like (TODO: define)
@Base The base class.
@Types All of the possible types. Must all inherit from &lt;Base&gt;.</p>
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::visitor_dispatch&lt;Visitor,Ret,Ts&gt;" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Struct <code>visitor_dispatch</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">Visitor</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="typ dec var fun">Ret</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Ts</span><span class="pun">&gt;</span>
<span class="kwd">struct</span> <span class="typ dec var fun">visitor_dispatch</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::visitor_dispatch&lt;Visitor,Ret,Ts&gt;-brief" class="standardese-brief-section">Used for &lt;match&gt;</p>
<p>invokes the visitor with the correct derived conversion
@Ret the return type of the visit. Compute using std::common_type
@Ts the types left to check in recursion</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::get_index_v" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Unexposed entity <code>get_index_v</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="typ dec var fun">template</span> <span class="pun">&lt;</span><span class="typ dec var fun">typename</span> <span class="kwd">T</span><span class="pun">&gt;</span><span class="typ dec var fun">static</span> <span class="typ dec var fun">constexpr</span> <span class="kwd">detail</span><span class="pun">::</span><span class="kwd">TypeIndex</span> <span class="kwd">get_index_v</span> <span class="pun">=</span> <span class="kwd">detail</span><span class="pun">::</span><span class="kwd">type_index</span><span class="pun">&lt;</span><span class="kwd">Base</span><span class="pun">,</span> <span class="kwd">T</span><span class="pun">,</span> <span class="kwd">Types</span><span class="pun">...</span><span class="pun">&gt;</span><span class="pun">::</span><span class="kwd">value</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::get_index_v-brief" class="standardese-brief-section">Shorthand for <code>get_index&lt;T&gt;::value</code></p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::is_valid_type&lt;T&gt;" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Alias template <code>is_valid_type</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">&gt;</span>
<span class="kwd">using</span> <span class="typ dec var fun">is_valid_type</span> <span class="pun">=</span> <span class="typ dec var fun">std::integral_constant</span><span class="pun">&lt;</span>bool, get_index_v&lt;T&gt; != invalid_index<span class="pun">&gt;</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::is_valid_type&lt;T&gt;-brief" class="standardese-brief-section">Member <code>value</code> is <code>true</code> if <code>T</code> is</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::is_valid_type_v" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Unexposed entity <code>is_valid_type_v</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="typ dec var fun">template</span> <span class="pun">&lt;</span><span class="typ dec var fun">typename</span> <span class="kwd">T</span><span class="pun">&gt;</span><span class="typ dec var fun">static</span> <span class="typ dec var fun">constexpr</span> <span class="typ dec var fun">bool</span> <span class="kwd">is_valid_type_v</span> <span class="pun">=</span> <span class="kwd">is_valid_type</span><span class="pun">&lt;</span><span class="kwd">T</span><span class="pun">&gt;</span><span class="pun">::</span><span class="kwd">value</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::is_valid_type_v-brief" class="standardese-brief-section">Shorthand for <code>is_valid_type&lt;T&gt;::value</code></p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::index_type" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Type alias <code>index_type</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">using</span> <span class="typ dec var fun">index_type</span> <span class="pun">=</span> <span class="typ dec var fun">detail::TypeIndex</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::index_type-brief" class="standardese-brief-section">Index</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::storage_type" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Type alias <code>storage_type</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">using</span> <span class="typ dec var fun">storage_type</span> <span class="pun">=</span> <span class="typ dec var fun">Storage</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::storage_type-brief" class="standardese-brief-section">The underlying storage.</p>
<p>Alias for &lt;Storage&gt;</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::base_type" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Type alias <code>base_type</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">using</span> <span class="typ dec var fun">base_type</span> <span class="pun">=</span> <span class="typ dec var fun">Base</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::base_type-brief" class="standardese-brief-section">The base type. Alias for &lt;Base&gt;</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::basic_poly_ptr()" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Constructor <code>basic_poly_ptr</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::basic_poly_ptr()-brief" class="standardese-brief-section">Default constructor. Stores a nullptr</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::basic_poly_ptr(otto::util::basic_poly_ptr::storage_typeconst&amp;)" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Constructor <code>basic_poly_ptr</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::storage_type"><span class="typ dec var fun">otto::util::basic_poly_ptr::storage_type</span></a> <span class="kwd">const</span><span class="pun">&amp;</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::basic_poly_ptr(otto::util::basic_poly_ptr::storage_typeconst&amp;)-brief" class="standardese-brief-section">Construct from storage type</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::basic_poly_ptr(otto::util::basic_poly_ptr::storage_type&amp;&amp;)" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Constructor <code>basic_poly_ptr</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::storage_type"><span class="typ dec var fun">otto::util::basic_poly_ptr::storage_type</span></a><span class="pun">&amp;&amp;</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::basic_poly_ptr(otto::util::basic_poly_ptr::storage_type&amp;&amp;)-brief" class="standardese-brief-section">Move storage into this</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::basic_poly_ptr&lt;T,&gt;(T*)" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Constructor <code>basic_poly_ptr</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">,</span> <span class="kwd">typename</span> <span class="pun">=</span> is_valid_type&lt;T&gt;<span class="pun">&gt;</span>
<span class="typ dec var fun">basic_poly_ptr</span><span class="pun">(</span><span class="typ dec var fun">T</span><span class="pun">*</span> <span class="typ dec var fun">t</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::basic_poly_ptr&lt;T,&gt;(T*)-brief" class="standardese-brief-section">Construct from a pointer to <code>T</code></p>
<p>@T Must be a valid type.
@t Will be stored. Must have a lifetime at least as long as this object.
It will be passed to the storage type, which decides what to do with
it. In the case of a <code>unique_poly_ptr</code>, this means &lt;t&gt; will be
destroyed with this object. With a non-owning <code>poly_ptr</code>, the
lifetime will not be affected.</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::is&lt;T&gt;()const" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Function <code>is</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">&gt;</span>
<span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, bool<span class="pun">&gt;</span> <span class="typ dec var fun">is</span><span class="pun">(</span><span class="pun">)</span> <span class="kwd">const</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::is&lt;T&gt;()const-brief" class="standardese-brief-section">Check if the <code>poly_ptr</code> currently holds a value of type &lt;T&gt;</p>
<p>@T Must be a valid type.
@return <code>true</code> if the currently stored type is <code>T</code>,
or if <code>T</code> is &lt;Base&gt;</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::is&lt;I&gt;()const" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Function <code>is</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::index_type"><span class="typ dec var fun">otto::util::basic_poly_ptr::index_type</span></a> <span class="typ dec var fun">I</span><span class="pun">&gt;</span>
<span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;get_type_t&lt;I&gt; &gt;, bool<span class="pun">&gt;</span> <span class="typ dec var fun">is</span><span class="pun">(</span><span class="pun">)</span> <span class="kwd">const</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::is&lt;I&gt;()const-brief" class="standardese-brief-section">Check if the <code>poly_ptr</code> currently holds a value of type &lt;T&gt;</p>
<p>@I Must be in range <code>[-2, sizeof...(Types...))</code>
@return <code>true</code> if the currently stored type is <code>T</code>,
or if <code>T</code> is &lt;Base&gt;</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::get&lt;T&gt;()" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Function <code>get</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">&gt;</span>
<span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, T &amp;<span class="pun">&gt;</span> <span class="typ dec var fun">get</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::get&lt;T&gt;()-brief" class="standardese-brief-section">Get the value of type <code>T</code></p>
<p>@T Must be a valid type.
@return A reference to the stored value, if the <code>poly_ptr</code> is holding a
type <code>T</code>, which is not null. If the <code>poly_ptr</code> is holding any
other type, it will throw <code>std::bad_cast</code></p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::get&lt;I&gt;()" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Function <code>get</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::index_type"><span class="typ dec var fun">otto::util::basic_poly_ptr::index_type</span></a> <span class="typ dec var fun">I</span><span class="pun">&gt;</span>
<span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;get_type_t&lt;I&gt; &gt;, get_type_t&lt;I&gt; &amp;<span class="pun">&gt;</span> <span class="typ dec var fun">get</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::get&lt;I&gt;()-brief" class="standardese-brief-section">Get the value of type with index T</p>
<p>@I Must be in range <code>[-2, sizeof...(Types...))</code>
@return A reference to the stored value, if the <code>poly_ptr</code> is holding a
type <code>T</code>, which is not null. If the <code>poly_ptr</code> is holding any
other type, it will throw <code>std::bad_cast</code></p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::operator=&lt;T&gt;(T*)" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Function <code>operator=</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">&gt;</span>
<span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, basic_poly_ptr&lt;Storage, Base, Types...&gt; &amp;<span class="pun">&gt;</span> <span class="typ dec var fun">operator=</span><span class="pun">(</span><span class="typ dec var fun">T</span><span class="pun">*</span> <span class="typ dec var fun">t</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::operator=&lt;T&gt;(T*)-brief" class="standardese-brief-section">Update the stored value and type</p>
<p>@T Must be a valid type.
@t Will be stored. It must have a lifetime at least as long as this
object. It will be passed to the storage type, which decides what to
do with it. In the case of a <code>unique_poly_ptr</code>, this means &lt;t&gt; will
be destroyed with this object. With a non-owning <code>poly_ptr</code>, the
lifetime will not be affected.</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::operator=&lt;T&gt;(T&amp;)" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Function <code>operator=</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="typ dec var fun">T</span><span class="pun">&gt;</span>
<span class="typ dec var fun">std::enable_if_t</span><span class="pun">&lt;</span>is_valid_type_v&lt;T&gt;, basic_poly_ptr&lt;Storage, Base, Types...&gt; &amp;<span class="pun">&gt;</span> <span class="typ dec var fun">operator=</span><span class="pun">(</span><span class="typ dec var fun">T</span><span class="pun">&amp;</span> <span class="typ dec var fun">t</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::operator=&lt;T&gt;(T&amp;)-brief" class="standardese-brief-section">Update the stored value and type</p>
<p>@T Must be a valid type.
@t Will be stored. It must have a lifetime at least as long as this
object. It will be passed to the storage type, which decides what to
do with it. In the case of a <code>unique_poly_ptr</code>, this means &lt;t&gt; will
be destroyed with this object. With a non-owning <code>poly_ptr</code>, the
lifetime will not be affected.</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::base()" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Function <code>base</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">&amp;</span> <span class="typ dec var fun">base</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::base()-brief" class="standardese-brief-section">Dereference the stored value as the base class</p>
<p>This method is what differentiates the <code>poly_ptr</code> from a variant of
pointers. In any non-null state, the value can be accessed as a &lt;Base&gt;.</p>
<p>Invoking this method while the <code>poly_ptr</code> is storing null, is undefined
behaviour.</p>
<p>@return a reference to the stored base.</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::operator*()" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Function <code>operator*</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">&amp;</span> <span class="typ dec var fun">operator*</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::operator*()-brief" class="standardese-brief-section">Dereference the internal pointer as &lt;Base&gt;</p>
<p>An alias to &lt;base()&gt;</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::operator-&gt;()" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Function <code>operator-&gt;</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">*</span> <span class="typ dec var fun">operator-&gt;</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::operator-&gt;()-brief" class="standardese-brief-section">Access the stored value as &lt;Base&gt;*</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::operatorbase_type*()" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Conversion operator <code>operator base_type*</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">operator</span> <a href="doc_poly-ptr.html#standardese-otto::util::basic_poly_ptr%3CStorage,Base,Types%3E::base_type"><span class="typ dec var fun">base_type</span></a><span class="pun">*</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::operatorbase_type*()-brief" class="standardese-brief-section">Implicitly convert to &lt;Base&gt;*</p>
</section>
<hr class="standardese-entity-documentation-break" />
<section id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::match&lt;Funcs&gt;(Funcs&amp;&amp;...)" class="standardese-entity-documentation">
<h3 class="standardese-entity-documentation-heading">Function <code>match</code></h3>
<pre><code class="standardese-language-cpp standardese-entity-synopsis"><span class="kwd">template</span> <span class="pun">&lt;</span><span class="kwd">typename</span> <span class="pun">...</span> <span class="typ dec var fun">Funcs</span><span class="pun">&gt;</span>
<span class="typ dec var fun">std::common_type_t</span><span class="pun">&lt;</span>util::invoke_result_t&lt;overloaded&lt;Funcs...&gt;, base_type &amp;&gt;, util::invoke_result_t&lt;overloaded&lt;Funcs...&gt;, Types &amp;&gt;...<span class="pun">&gt;</span> <span class="typ dec var fun">match</span><span class="pun">(</span>Funcs &amp;&amp;... <span class="typ dec var fun">f</span><span class="pun">)</span><span class="pun">;</span>
</code></pre>
<p id="standardese-otto::util::basic_poly_ptr&lt;Storage,Base,Types&gt;::match&lt;Funcs&gt;(Funcs&amp;&amp;...)-brief" class="standardese-brief-section">Pattern matching with lambdas</p>
<p>TODO: Document</p>
</section>
<hr class="standardese-entity-documentation-break" />
</section>
<hr class="standardese-entity-documentation-break" />
</section>
</section>
</article>
    </div>
    <div class="sidebar left">
      <ul id="standardese-file-index" class="standardese-file-index">
<h1>Project files</h1>
<li id="standardese-algorithm.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_algorithm.html#standardese-algorithm.hpp"><code>algorithm.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-audio.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_audio.html#standardese-audio.hpp"><code>audio.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-bytefile.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_bytefile.html#standardese-bytefile.hpp"><code>bytefile.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-cache.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_cache.html#standardese-cache.hpp"><code>cache.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-canvas.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_canvas.html#standardese-canvas.hpp"><code>canvas.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-drawing.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_drawing.html#standardese-drawing.hpp"><code>drawing.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-drum-sampler.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_drum-sampler.html#standardese-drum-sampler.hpp"><code>drum-sampler.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-dyn-array.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_dyn-array.html#standardese-dyn-array.hpp"><code>dyn-array.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-engine-props.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_engine-props.html#standardese-engine-props.hpp"><code>engine-props.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-engine.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_engine.html#standardese-engine.hpp"><code>engine.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-engine_dispatcher.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_engine_dispatcher.html#standardese-engine_dispatcher.hpp"><code>engine_dispatcher.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-event.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_event.html#standardese-event.hpp"><code>event.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-exception.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_exception.html#standardese-exception.hpp"><code>exception.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-faust-engine.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_faust-engine.html#standardese-faust-engine.hpp"><code>faust-engine.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-faust.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_faust.html#standardese-faust.hpp"><code>faust.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-filesystem.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_filesystem.html#standardese-filesystem.hpp"><code>filesystem.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-globals.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_globals.html#standardese-globals.hpp"><code>globals.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-icons.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_icons.html#standardese-icons.hpp"><code>icons.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-input_selector.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_input_selector.html#standardese-input_selector.hpp"><code>input_selector.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-iterator.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_iterator.html#standardese-iterator.hpp"><code>iterator.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-jsonfile.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_jsonfile.html#standardese-jsonfile.hpp"><code>jsonfile.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-locked.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_locked.html#standardese-locked.hpp"><code>locked.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-macros.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_macros.html#standardese-macros.hpp"><code>macros.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-main_audio.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_main_audio.html#standardese-main_audio.hpp"><code>main_audio.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-mainui.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_mainui.html#standardese-mainui.hpp"><code>mainui.hpp</code></a></dt>
<dd>&mdash; This file contains the UI state. If you do not need access to this, but just
the library, look at <code>core&#x2F;ui&#x2F;widgets.hpp</code> and <code>core&#x2F;ui&#x2F;canvas.hpp</code> instead.</dd>
</dl>
</li>
<li id="standardese-math.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_math.html#standardese-math.hpp"><code>math.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-metronome.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_metronome.html#standardese-metronome.hpp"><code>metronome.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-midi.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_midi.html#standardese-midi.hpp"><code>midi.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-mixer.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_mixer.html#standardese-mixer.hpp"><code>mixer.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-nuke.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_nuke.html#standardese-nuke.hpp"><code>nuke.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-poly-ptr.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_poly-ptr.html#standardese-poly-ptr.hpp"><code>poly-ptr.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-processor.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_processor.html#standardese-processor.hpp"><code>processor.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-result.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_result.html#standardese-result.hpp"><code>result.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-ringbuffer.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_ringbuffer.html#standardese-ringbuffer.hpp"><code>ringbuffer.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-screens.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_screens.html#standardese-screens.hpp"><code>screens.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-simple-drums.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_simple-drums.html#standardese-simple-drums.hpp"><code>simple-drums.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-soundfile.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_soundfile.html#standardese-soundfile.hpp"><code>soundfile.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-tapebuffer.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_tapebuffer.html#standardese-tapebuffer.hpp"><code>tapebuffer.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-tapedeck.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_tapedeck.html#standardese-tapedeck.hpp"><code>tapedeck.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-tapefile.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_tapefile.html#standardese-tapefile.hpp"><code>tapefile.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-tapescreen.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_tapescreen.html#standardese-tapescreen.hpp"><code>tapescreen.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-timer.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_timer.html#standardese-timer.hpp"><code>timer.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-type_traits.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_type_traits.html#standardese-type_traits.hpp"><code>type_traits.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-ui.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_ui.html#standardese-ui.hpp"><code>ui.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-waveform_widget.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_waveform_widget.html#standardese-waveform_widget.hpp"><code>waveform_widget.hpp</code></a></dt>
</dl>
</li>
<li id="standardese-widget.hpp" class="standardese-entity-index-item">
<dl>
<dt><a href="doc_widget.html#standardese-widget.hpp"><code>widget.hpp</code></a></dt>
</dl>
</li>
</ul>
    </div>
  </div>
</body>
</html>

